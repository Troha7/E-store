<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>admin</title>
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
          integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/main.css}" type="text/css"/>


</head>
<body>
<div th:insert="~{fragments/navbar :: navbar}"></div>

<div class="page-content">
    <h2 class="text-center"> Users: </h2>

    <table class="table table-sm table-dark">
        <tr th:each="user: ${users}">
            <td>
                <form class="form-inline" th:id="${user.id}" th:action="@{/users/{id}(id=${user.id})}"
                      th:object="${user}">
                    <div class="form-group row">
                        <div class="col-md-1">
                            <label th:if="${users[0].equals(user)}">ID</label>
                            <input class="form-control" id="id" type="text" name="id" th:value="${user.id}" readonly>
                        </div>
                        <div class="col-md-2">
                            <label th:if="${users[0].equals(user)}">Username</label>
                            <input class="form-control" id="username" type="text" name="username"
                                   th:value="${user.username}">
                        </div>
                        <input type="hidden" name="password" th:value="${user.password}">
                        <div class="col-md-2">
                            <label th:if="${users[0].equals(user)}">First name</label>
                            <input class="form-control" id="first-name" type="text" name="firstName"
                                   th:value="${user.firstName}">
                        </div>
                        <div class="col-md-2">
                            <label th:if="${users[0].equals(user)}">Last name</label>
                            <input class="form-control" id="last-name" type="text" name="lastName"
                                   th:value="${user.lastName}">
                        </div>
                        <div class="col-md-2">
                            <label th:if="${users[0].equals(user)}">Email</label>
                            <input class="form-control" id="email" type="email" name="email" th:value="${user.email}">
                        </div>
                        <div class="col-md-2">
                            <label th:if="${users[0].equals(user)}">Phone</label>
                            <input class="form-control" id="phone" type="text" name="phone" th:value="${user.phone}">
                        </div>
                        <div class="col-md-1">
                            <label th:if="${users[0].equals(user)}">Role</label>
                            <select class="form-control" id="role" name="role">
                                <option th:each="role: ${roles}"
                                         th:selected="${user.role == role}"
                                        th:text="${role}"
                                        th:value="${role}">
                                </option>
                            </select>
                        </div>
                    </div>
                </form>
            </td>
            <td>
                <label th:if="${users[0].equals(user)}"><br></label>
                <button class="btn btn-warning" th:onclick="'updateById(\'/users/' + ${user.id} + '\')'"> Update
                </button>
            </td>
            <td>
                <label th:if="${users[0].equals(user)}"><br></label>
                <button class="btn btn-danger" th:onclick="'deleteById(\'/users/' + ${user.id} + '\')'"> Delete
                </button>
            </td>
        </tr>
    </table>
</div>

<div th:insert="~{fragments/footer :: footer}"></div>

<script th:src="@{/js/deleteFunction.js}"></script>
<script th:src="@{/js/updateFunction.js}"></script>

</body>
</html>